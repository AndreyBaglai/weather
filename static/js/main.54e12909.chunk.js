(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{18:function(e,t,r){e.exports={form:"styles_form__3EBa3",cityField:"styles_cityField__X_G8w",error:"styles_error__226dO",addBtn:"styles_addBtn__2cTns"}},30:function(e,t,r){e.exports={header:"styles_header__bFteW",removeAll:"styles_removeAll__7zdrw"}},33:function(e,t,r){e.exports={container:"styles_container__1moU1",text:"styles_text__2aAIj"}},4:function(e,t,r){e.exports={card:"styles_card__etA8J",removeCard:"styles_removeCard__3LVBh",countryInfo:"styles_countryInfo__1B1uy",country:"styles_country__2X5-F",date:"styles_date__aDN0P",cardTop:"styles_cardTop__PZ0Pr",cardBottom:"styles_cardBottom__3gCQ-",weatherIcon:"styles_weatherIcon__3o0uX",icon:"styles_icon__3t6wJ",redGraphic:"styles_redGraphic__2m9K6",blueGraphic:"styles_blueGraphic__V2nsd",graphic:"styles_graphic__8Ulfe",tempList:"styles_tempList__18qBK",week:"styles_week__2Wd9T",temperatureWrapper:"styles_temperatureWrapper__PepwB",feels:"styles_feels__1BbQ3",temperature:"styles_temperature__v10fN",metric:"styles_metric__2gzdV",celsius:"styles_celsius__3uEzB",fahrenheit:"styles_fahrenheit__3gzdm",active:"styles_active__ywbG_",weatherInfo:"styles_weatherInfo__1Rq13",value:"styles_value__1498B"}},40:function(e,t,r){e.exports={selectLang:"styles_selectLang__ZQ06w"}},41:function(e,t,r){e.exports={loader:"styles_loader__KW6Vc"}},43:function(e,t,r){e.exports={main:"styles_main__xrIMk"}},62:function(e,t,r){},63:function(e,t,r){"use strict";r.r(t);var a,n,c,i,s,o,l,u,d,p,j,b,h=r(0),m=r.n(h),f=r(26),y=r.n(f),O=r(22),g=r(64),_=r(36),v=r(3),x=r.n(v),w=r(7),C=r(14),N=r(27),I=r.n(N),S=r(47),L=r(9),k=r(8),B=r(5),P=(r(25),r(2)),T=new(a=function e(){Object(k.a)(this,e),Object(L.a)(this,"lang",n,this),Object(L.a)(this,"changeLang",c,this),Object(P.e)(this)},n=Object(B.a)(a.prototype,"lang",[P.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en"}}),c=Object(B.a)(a.prototype,"changeLang",[P.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.lang=t}}}),a),A=r(6),z=r(23),F=new(i=function(){function e(){Object(k.a)(this,e),Object(L.a)(this,"cards",s,this),Object(P.e)(this)}return Object(z.a)(e,[{key:"addCard",value:function(e){this.isRepeatCard(e)||this.cards.unshift(e)}},{key:"isRepeatCard",value:function(e){return this.cards.some((function(t){return t.city.toLowerCase()===e.city.toLowerCase()&&t.description.toLowerCase()===e.description.toLowerCase()}))}},{key:"getCardById",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"removeCardById",value:function(e){this.cards=this.cards.filter((function(t){return t.id!==e}))}},{key:"updateCardTemperature",value:function(e,t){this.cards=this.cards.map((function(r){return r.id===t&&(r.temperature=e),r}))}},{key:"getAllNamesCity",value:function(){return this.cards.map((function(e){return e.city}))}},{key:"updateCards",value:function(e){this.cards=Object(A.a)(e)}},{key:"removeAllCards",value:function(){this.cards=[]}}]),e}(),s=Object(B.a)(i.prototype,"cards",[P.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(B.a)(i.prototype,"addCard",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"addCard"),i.prototype),Object(B.a)(i.prototype,"isRepeatCard",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"isRepeatCard"),i.prototype),Object(B.a)(i.prototype,"getCardById",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"getCardById"),i.prototype),Object(B.a)(i.prototype,"removeCardById",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"removeCardById"),i.prototype),Object(B.a)(i.prototype,"updateCardTemperature",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"updateCardTemperature"),i.prototype),Object(B.a)(i.prototype,"getAllNamesCity",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"getAllNamesCity"),i.prototype),Object(B.a)(i.prototype,"updateCards",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"updateCards"),i.prototype),Object(B.a)(i.prototype,"removeAllCards",[P.b],Object.getOwnPropertyDescriptor(i.prototype,"removeAllCards"),i.prototype),i),D=new(o=function e(){Object(k.a)(this,e),Object(L.a)(this,"isLoading",l,this),Object(L.a)(this,"toggleLoader",u,this),Object(P.e)(this)},l=Object(B.a)(o.prototype,"isLoading",[P.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(B.a)(o.prototype,"toggleLoader",[P.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.isLoading=!e.isLoading}}}),o),E=(d=function e(){Object(k.a)(this,e),Object(L.a)(this,"languageStore",p,this),Object(L.a)(this,"cardsStore",j,this),Object(L.a)(this,"loaderStore",b,this)},p=Object(B.a)(d.prototype,"languageStore",[P.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T}}),j=Object(B.a)(d.prototype,"cardsStore",[P.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F}}),b=Object(B.a)(d.prototype,"loaderStore",[P.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D}}),d),M=new E,R=Object(h.createContext)(M),G=function(){var e=Object(h.useContext)(R);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},J=(new E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return fetch("".concat("https://api.openweathermap.org/data/2.5/weather","?q=").concat(e,"&units=metric&lang=").concat(t,"&appid=").concat("2904218e66790986ea8f1701ca13b7b5")).then((function(e){if(404!==e.status)return e.json()})).then((function(e){return e}))}),W="cards",K="lang";function V(){var e=localStorage.getItem(W);return e?JSON.parse(e):[]}function H(e){localStorage.setItem(W,JSON.stringify(e))}function Z(e){var t=V();t.length&&H(t.filter((function(t){return t.id!==e})))}function U(e,t){Z(t);var r=V();H([e].concat(Object(A.a)(r)))}function X(){var e=localStorage.getItem(K);return e?JSON.parse(e):""}function q(e){localStorage.setItem(K,JSON.stringify(e))}var Q,Y=r(18),$=r.n(Y),ee=r(1),te=function(){var e=Object(h.useState)(!1),t=Object(C.a)(e,2),r=t[0],a=t[1],n=Object(h.useState)(!1),c=Object(C.a)(n,2),i=c[0],s=c[1],o=Object(g.a)().t,l=Object(S.a)(),u=l.register,d=l.handleSubmit,p=l.reset,j=l.formState,b=j.errors,m=j.isSubmitSuccessful,f=G(),y=f.cardsStore,O=f.languageStore;Object(h.useEffect)((function(){m&&p({city:""})}),[m,p]);var v=function(){var e=Object(w.a)(x.a.mark((function e(t){var r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.city,e.prev=1,""!==r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,J(r,O.lang);case 6:(n=e.sent)||(a(!0),setTimeout((function(){return a(!1)}),2e3)),c={id:I()(),city:n.name,time:n.dt,country:n.sys.country,temperature:n.main.temp,humidity:n.main.humidity,pressure:n.main.pressure,feels:n.main.feels_like,icon:n.weather[0].icon,text_icon:n.weather[0].main,description:n.weather[0].description,wind_speed:n.wind.speed,isCelsius:!0},y.isRepeatCard(c)&&(setTimeout((function(){return s(!1)}),2e3),s(!0)),y.addCard(c),H(y.cards),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("Invalid city name ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsxs)("form",{className:$.a.form,onSubmit:d(v),children:[Object(ee.jsx)("input",Object(_.a)({type:"text",className:$.a.cityField,id:"city",placeholder:o("placeholder")},u("city",{pattern:{value:/^([a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0430-\u044f\u0410-\u042f\u0080-\u024F]*$/,message:o("tooltips.validate")}}))),b.city&&Object(ee.jsx)("p",{className:$.a.error,children:b.city.message}),r&&Object(ee.jsx)("p",{className:$.a.error,children:o("tooltips.not_found")}),i&&Object(ee.jsx)("p",{className:$.a.error,children:o("tooltips.city_repeat")}),Object(ee.jsx)("button",{className:$.a.addBtn,id:"addBtn",children:o("buttons.add")})]})},re=r(40),ae=r.n(re),ne={en:{nativeName:"English"},ru:{nativeName:"Russian"},uk:{nativeName:"Ukraine"},he:{nativeName:"Hebrew"}},ce=Object(O.a)((function(){var e=G(),t=e.cardsStore,r=e.languageStore,a=e.loaderStore,n=Object(g.a)().i18n,c=function(){var e=Object(w.a)(x.a.mark((function e(c){var i,s,o,l,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.toggleLoader(),i=c.target,s=i.value,n.changeLanguage(s),o=t.getAllNamesCity(),l=o.map((function(e){return new Promise((function(t,r){t(J(e,s))}))})),e.next=8,Promise.all(l).then((function(e){return e.map((function(e){return{id:I()(),city:e.name,time:e.dt,country:e.sys.country,temperature:e.main.temp,humidity:e.main.humidity,pressure:e.main.pressure,feels:e.main.feels_like,icon:e.weather[0].icon,text_icon:e.weather[0].main,description:e.weather[0].description,wind_speed:e.wind.speed,isCelsius:!0}}))}));case 8:u=e.sent,t.updateCards(u),r.changeLang(s),H(u),q(s),setTimeout((function(){a.toggleLoader()}),1e3);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsx)("select",{name:"language",id:"lang",className:ae.a.selectLang,onChange:c,defaultValue:X(),children:Object.keys(ne).map((function(e){return Object(ee.jsx)("option",{value:e,children:e.toUpperCase()},e)}))})})),ie=r(30),se=r.n(ie),oe=function(){var e=G().cardsStore,t=Object(g.a)().t;return Object(ee.jsxs)("header",{className:se.a.header,children:[Object(ee.jsx)(te,{}),Object(ee.jsx)("button",{className:se.a.removeAll,onClick:function(){e.removeAllCards(),localStorage.removeItem(W)},children:t("buttons.remove")}),Object(ee.jsx)(ce,{})]})},le=r(41),ue=r.n(le),de=function(){var e=Object(g.a)().t;return Object(ee.jsx)("h2",{className:ue.a.loader,children:e("loader")})},pe=r(10),je=r(31),be=r.n(je),he=r(65),me=["title","titleId"];function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function ye(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Oe(e,t){var r=e.title,a=e.titleId,n=ye(e,me);return h.createElement("svg",fe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,Q||(Q=h.createElement("path",{fill:"#ff715b",fillOpacity:1,d:"M0,288L48,272C96,256,192,224,288,197.3C384,171,480,149,576,165.3C672,181,768,235,864,250.7C960,267,1056,245,1152,250.7C1248,256,1344,288,1392,304L1440,320L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})))}var ge=h.forwardRef(Oe),_e=(r.p,r(4)),ve=r.n(_e),xe=function(){var e=new Date,t=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),r=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(t,":").concat(r)},we=function(e){var t=new Date,r=t.getMonth(),a=t.getDay(),n=t.getDate(),c=e("months.month_".concat(r)),i=e("days.day_".concat(a));return"".concat(i,", ").concat(n," ").concat(c,",")},Ce=function(e,t){var r=Math.ceil(e);return 0===r?"0":"he"===t?r>0?"".concat(r,"+"):"".concat(Math.abs(r),"-"):r>0?"+".concat(r):"-".concat(r)},Ne=function(e){var t=e.onRemoveCard,r=e.cardInfo,a=e.onChangeInCelsius,n=e.onChangeInFahrenheit,c=Object(g.a)(),i=c.t,s=c.i18n;return Object(ee.jsxs)("div",{className:ve.a.card,id:String(r.id),style:{backgroundColor:r.temperature<0?"#F1F2FF":"#fff1fe"},children:[Object(ee.jsx)("button",{className:ve.a.removeCard,onClick:t,children:"X"}),Object(ee.jsxs)("div",{className:ve.a.cardTop,children:[Object(ee.jsxs)("div",{className:ve.a.countryInfo,children:[Object(ee.jsxs)("div",{className:ve.a.country,children:[r.city,", ",r.country]}),Object(ee.jsxs)("div",{className:ve.a.date,children:[we(i)," ",xe()]})]}),Object(ee.jsxs)("div",{className:ve.a.weatherIcon,children:[Object(ee.jsx)("img",{className:ve.a.icon,src:"".concat("https://openweathermap.org/img/wn/").concat(r.icon,"@2x.png"),alt:"Icon"}),Object(ee.jsx)("p",{className:ve.a.textIcon,children:i("weather.descriptions.description_".concat(r.text_icon.toLocaleLowerCase()))})]})]}),Object(ee.jsxs)("div",{className:ve.a.graphic,children:[Object(ee.jsxs)("ul",{className:ve.a.tempList,children:[Object(ee.jsx)("li",{children:"10"}),Object(ee.jsx)("li",{children:"13"}),Object(ee.jsx)("li",{children:"16"}),Object(ee.jsx)("li",{children:"13"}),Object(ee.jsx)("li",{children:"10"}),Object(ee.jsx)("li",{children:"10"}),Object(ee.jsx)("li",{children:"07"})]}),Object(ee.jsx)(ge,{className:r.temperature>0?ve.a.redGraphic:ve.a.blueGraphic}),Object(ee.jsxs)("ul",{className:ve.a.week,children:[Object(ee.jsx)("li",{children:"19.04"}),Object(ee.jsx)("li",{children:"20.04"}),Object(ee.jsx)("li",{children:"21.04"}),Object(ee.jsx)("li",{children:"22.04"}),Object(ee.jsx)("li",{children:"23.04"}),Object(ee.jsx)("li",{children:"24.04"}),Object(ee.jsx)("li",{children:"25.04"})]})]}),Object(ee.jsxs)("div",{className:ve.a.cardBottom,children:[Object(ee.jsxs)("div",{className:ve.a.temperatureWrapper,children:[Object(ee.jsxs)("div",{className:ve.a.mainTemperature,children:[Object(ee.jsx)("span",{className:ve.a.temperature,children:Ce(r.temperature,s.language)}),Object(ee.jsxs)("span",{className:ve.a.metric,children:[Object(ee.jsx)("span",{"data-id":r.id,onClick:a,className:be()(ve.a.celsius,Object(pe.a)({},ve.a.active,r.isCelsius)),children:"\xb0C"})," ","|"," ",Object(ee.jsx)("span",{"data-id":r.id,onClick:n,className:be()(ve.a.fahrenheit,Object(pe.a)({},ve.a.active,!r.isCelsius)),children:"\xb0F"})]})]}),Object(ee.jsx)("div",{className:ve.a.feels,children:i("weather.feels",{value:Ce(Math.ceil(r.feels),s.language)})})]}),Object(ee.jsxs)("div",{className:ve.a.weatherInfo,children:[Object(ee.jsx)("p",{children:r.description}),Object(ee.jsx)("p",{children:Object(ee.jsxs)(he.a,{i18nKey:"weather.wind",values:{value:r.wind_speed},children:["Wind ",Object(ee.jsx)("span",{className:ve.a.value,children:"m/s"})]})}),Object(ee.jsx)("p",{children:Object(ee.jsxs)(he.a,{i18nKey:"weather.humidity",values:{value:r.humidity},children:["Humidity ",Object(ee.jsx)("span",{className:ve.a.value,children:"%"})]})}),Object(ee.jsx)("p",{children:Object(ee.jsxs)(he.a,{i18nKey:"weather.pressure",values:{value:r.pressure},children:["Pressure ",Object(ee.jsx)("span",{className:ve.a.value,children:"Pa"})]})})]})]})]})},Ie=r(43),Se=r.n(Ie),Le=Object(O.a)((function(){var e=G(),t=e.loaderStore,r=e.cardsStore,a=function(e){var t,a=e.currentTarget.dataset.id;if(a){var n=r.getCardById(a);n&&!n.isCelsius&&(n.isCelsius=!0,n.temperature=(t=n.temperature,Math.ceil(5/9*(t-32))),r.updateCardTemperature(n.temperature,a),U(n,a))}},n=function(e){var t,a=e.currentTarget.dataset.id;if(a){var n=r.getCardById(a);n&&n.isCelsius&&(n.isCelsius=!1,n.temperature=(t=n.temperature,Math.floor(1.8*t+32)),r.updateCardTemperature(n.temperature,a),U(n,a))}},c=function(e){var t,a=null===(t=e.target.parentElement)||void 0===t?void 0:t.id;a&&(r.removeCardById(a),Z(a))};return Object(ee.jsx)("main",{className:Se.a.main,children:t.isLoading?Object(ee.jsx)(de,{}):r.cards.map((function(e){return Object(ee.jsx)(Ne,{onChangeInCelsius:a,onChangeInFahrenheit:n,onRemoveCard:c,cardInfo:e},e.id)}))})})),ke=r(33),Be=r.n(ke),Pe=Object(O.a)((function(){var e=G(),t=e.cardsStore,r=e.languageStore,a=Object(g.a)().t;return Object(h.useEffect)((function(){var e=X();V().length&&t.updateCards(V()),""!==e?r.changeLang(e):q(r.lang)}),[]),Object(ee.jsxs)("div",{className:Be.a.container,children:[Object(ee.jsx)(oe,{}),0===t.cards.length?Object(ee.jsx)("h2",{className:Be.a.text,children:a("empty")}):Object(ee.jsx)(Le,{})]})})),Te=r(34),Ae=r(15),ze=r(44),Fe=r(45);Te.a.use(Fe.a).use(ze.a).use(Ae.e).init({backend:{loadPath:"".concat(window.origin,"/weather/locales/{{lng}}/{{ns}}.json")},debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1}});Te.a,r(61),r(62);y.a.render(Object(ee.jsx)(m.a.StrictMode,{children:Object(ee.jsx)(h.Suspense,{fallback:"Loading...",children:Object(ee.jsx)(Pe,{})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.54e12909.chunk.js.map