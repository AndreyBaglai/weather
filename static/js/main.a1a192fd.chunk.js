(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{14:function(e,t,r){e.exports={temperatureWrapper:"styles_temperatureWrapper__34EEU",feels:"styles_feels__3dphw",temperature:"styles_temperature__gRcve",metric:"styles_metric__2ACJ1",celsius:"styles_celsius__18sHU",fahrenheit:"styles_fahrenheit__2coY3",active:"styles_active__2CR8f"}},19:function(e,t,r){e.exports={weatherInfo:"styles_weatherInfo__Fxs3u",blueText:"styles_blueText__2SkLs",orangeText:"styles_orangeText__3yYNI"}},20:function(e,t,r){e.exports={form:"styles_form__3EBa3",cityField:"styles_cityField__X_G8w",error:"styles_error__226dO",addBtn:"styles_addBtn__2cTns"}},25:function(e,t,r){e.exports={graphic:"styles_graphic__fDmFu",tempList:"styles_tempList__1bNkv",week:"styles_week__pPTkJ",redGraphic:"styles_redGraphic__2QBsi",blueGraphic:"styles_blueGraphic__DeTgc"}},27:function(e,t,r){e.exports={card:"styles_card__etA8J",removeCard:"styles_removeCard__3LVBh",cardTop:"styles_cardTop__PZ0Pr",cardBottom:"styles_cardBottom__3gCQ-"}},31:function(e,t,r){e.exports={weatherIcon:"styles_weatherIcon__3FTsZ",icon:"styles_icon__5f5Le"}},32:function(e,t,r){e.exports={countryInfo:"styles_countryInfo__3dm7l",country:"styles_country__ITxdX",date:"styles_date__2P8eT"}},35:function(e,t,r){e.exports={header:"styles_header__bFteW",removeAll:"styles_removeAll__7zdrw"}},38:function(e,t,r){e.exports={container:"styles_container__1moU1",text:"styles_text__2aAIj"}},45:function(e,t,r){e.exports={selectLang:"styles_selectLang__ZQ06w"}},46:function(e,t,r){e.exports={loader:"styles_loader__KW6Vc"}},48:function(e,t,r){e.exports={main:"styles_main__xrIMk"}},67:function(e,t,r){},68:function(e,t,r){"use strict";r.r(t);var a,n,c,i,s,o,l,u,d,p,j,h,b=r(0),m=r.n(b),f=r(29),y=r.n(f),O=r(23),g=r(69),v=r(41),x=r(3),_=r.n(x),w=r(6),C=r(13),N=r(30),I=r.n(N),S=r(52),L=r(1),k=function(e){var t=e.handler,r=e.classBtn,a=e.children;return Object(L.jsx)("button",{className:r,onClick:t,children:a})},T=r(8),B=r(7),P=r(4),F=(r(28),r(2)),A=new(a=function e(){Object(B.a)(this,e),Object(T.a)(this,"lang",n,this),Object(T.a)(this,"changeLang",c,this),Object(F.e)(this)},n=Object(P.a)(a.prototype,"lang",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en"}}),c=Object(P.a)(a.prototype,"changeLang",[F.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.lang=t}}}),a),D=r(5),E=r(24),z=new(i=function(){function e(){Object(B.a)(this,e),Object(T.a)(this,"cards",s,this),Object(F.e)(this)}return Object(E.a)(e,[{key:"addCard",value:function(e){this.isRepeatCard(e)||this.cards.unshift(e)}},{key:"isRepeatCard",value:function(e){return this.cards.some((function(t){var r,a;return t.city.toLowerCase()===e.city.toLowerCase()&&(null===(r=t.description)||void 0===r?void 0:r.toLowerCase())===(null===(a=e.description)||void 0===a?void 0:a.toLowerCase())}))}},{key:"getCardById",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"removeCardById",value:function(e){this.cards=this.cards.filter((function(t){return t.id!==e}))}},{key:"updateCardTemperature",value:function(e,t){this.cards=this.cards.map((function(r){return r.id===t&&(r.temperature=e),r}))}},{key:"getAllNamesCity",value:function(){return this.cards.map((function(e){return e.city}))}},{key:"updateCards",value:function(e){this.cards=Object(D.a)(e)}},{key:"removeAllCards",value:function(){this.cards=[]}}]),e}(),s=Object(P.a)(i.prototype,"cards",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(P.a)(i.prototype,"addCard",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"addCard"),i.prototype),Object(P.a)(i.prototype,"isRepeatCard",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"isRepeatCard"),i.prototype),Object(P.a)(i.prototype,"getCardById",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"getCardById"),i.prototype),Object(P.a)(i.prototype,"removeCardById",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"removeCardById"),i.prototype),Object(P.a)(i.prototype,"updateCardTemperature",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"updateCardTemperature"),i.prototype),Object(P.a)(i.prototype,"getAllNamesCity",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"getAllNamesCity"),i.prototype),Object(P.a)(i.prototype,"updateCards",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"updateCards"),i.prototype),Object(P.a)(i.prototype,"removeAllCards",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"removeAllCards"),i.prototype),i),R=new(o=function e(){Object(B.a)(this,e),Object(T.a)(this,"isLoading",l,this),Object(T.a)(this,"toggleLoader",u,this),Object(F.e)(this)},l=Object(P.a)(o.prototype,"isLoading",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(P.a)(o.prototype,"toggleLoader",[F.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.isLoading=!e.isLoading}}}),o),J=(d=function e(){Object(B.a)(this,e),Object(T.a)(this,"languageStore",p,this),Object(T.a)(this,"cardsStore",j,this),Object(T.a)(this,"loaderStore",h,this)},p=Object(P.a)(d.prototype,"languageStore",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A}}),j=Object(P.a)(d.prototype,"cardsStore",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z}}),h=Object(P.a)(d.prototype,"loaderStore",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R}}),d),M=new J,G=Object(b.createContext)(M),W=function(){var e=Object(b.useContext)(G);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},Z=(new J,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return fetch("".concat("https://api.openweathermap.org/data/2.5/weather","?q=").concat(e,"&units=metric&lang=").concat(t,"&appid=").concat("2904218e66790986ea8f1701ca13b7b5")).then((function(e){if(404!==e.status)return e.json()})).then((function(e){return e}))}),U="cards",K="lang";function V(){var e=localStorage.getItem(U);return e?JSON.parse(e):[]}function H(e){localStorage.setItem(U,JSON.stringify(e))}function Q(e){var t=V();t.length&&H(t.filter((function(t){return t.id!==e})))}function X(e,t){Q(t);var r=V();H([e].concat(Object(D.a)(r)))}function Y(){var e=localStorage.getItem(K);return e?JSON.parse(e):""}function q(e){localStorage.setItem(K,JSON.stringify(e))}var $,ee=r(20),te=r.n(ee),re=function(){var e=Object(b.useState)(!1),t=Object(C.a)(e,2),r=t[0],a=t[1],n=Object(b.useState)(!1),c=Object(C.a)(n,2),i=c[0],s=c[1],o=Object(g.a)(),l=o.t,u=o.i18n,d=Object(S.a)(),p=d.register,j=d.handleSubmit,h=d.reset,m=d.formState,f=m.errors,y=m.isSubmitSuccessful,O=W(),x=O.cardsStore,N=O.languageStore;Object(b.useEffect)((function(){y&&h({city:""})}),[y,h]);var T=function(){var e=Object(w.a)(_.a.mark((function e(t){var r,n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.city,e.prev=1,""!==r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Z(r,N.lang);case 6:(n=e.sent)||(a(!0),setTimeout((function(){return a(!1)}),2e3)),c={id:I()(),city:n.name,time:n.dt,country:n.sys.country,temperature:n.main.temp,humidity:n.main.humidity,pressure:n.main.pressure,feels:n.main.feels_like,icon:n.weather[0].icon,text_icon:n.weather[0].main,description:n.weather[0].description,wind_speed:n.wind.speed,isCelsius:!0},x.isRepeatCard(c)&&(setTimeout((function(){return s(!1)}),2e3),s(!0)),x.addCard(c),H(x.cards),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("Invalid city name ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsxs)("form",{className:te.a.form,onSubmit:j(T),children:[Object(L.jsx)("input",Object(v.a)({type:"text",className:te.a.cityField,id:"city",lang:u.language,placeholder:l("placeholder")},p("city",{pattern:{value:/^([a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0430-\u044f\u0410-\u042f\u0080-\u024F]*$/,message:l("tooltips.validate")}}))),f.city&&Object(L.jsx)("p",{className:te.a.error,children:f.city.message}),r&&Object(L.jsx)("p",{className:te.a.error,children:l("tooltips.not_found")}),i&&Object(L.jsx)("p",{className:te.a.error,children:l("tooltips.city_repeat")}),Object(L.jsx)(k,{classBtn:te.a.addBtn,id:"addBtn",children:l("buttons.add")})]})},ae=r(45),ne=r.n(ae),ce={en:{nativeName:"English"},ru:{nativeName:"Russian"},uk:{nativeName:"Ukraine"},he:{nativeName:"Hebrew"}},ie=Object(O.a)((function(){var e=W(),t=e.cardsStore,r=e.languageStore,a=e.loaderStore,n=Object(g.a)().i18n,c=function(){var e=Object(w.a)(_.a.mark((function e(c){var i,s,o,l,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.toggleLoader(),i=c.target,s=i.value,n.changeLanguage(s),o=t.getAllNamesCity(),l=o.map((function(e){return new Promise((function(t,r){t(Z(e,s))}))})),e.next=8,Promise.all(l).then((function(e){return e.map((function(e){var t=e.weather&&e.weather[0];return{id:I()(),city:e.name,time:e.dt,country:e.sys.country,temperature:e.main.temp,humidity:e.main.humidity,pressure:e.main.pressure,feels:e.main.feels_like,icon:t&&t.icon,text_icon:t&&t.main,description:t&&t.description,wind_speed:e.wind.speed,isCelsius:!0}}))}));case 8:u=e.sent,t.updateCards(u),r.changeLang(s),H(u),q(s),setTimeout((function(){a.toggleLoader()}),1e3);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsx)("select",{name:"language",id:"lang",className:ne.a.selectLang,onChange:c,defaultValue:Y(),children:Object.keys(ce).map((function(e){return Object(L.jsx)("option",{value:e,children:e.toUpperCase()},e)}))})})),se=r(35),oe=r.n(se),le=function(){var e=W().cardsStore,t=Object(g.a)().t;return Object(L.jsxs)("header",{className:oe.a.header,children:[Object(L.jsx)(re,{}),Object(L.jsx)(k,{classBtn:oe.a.removeAll,handler:function(){e.removeAllCards(),localStorage.removeItem(U)},children:t("buttons.remove")}),Object(L.jsx)(ie,{})]})},ue=r(46),de=r.n(ue),pe=function(){var e=Object(g.a)().t;return Object(L.jsx)("h2",{className:de.a.loader,children:e("loader")})},je=["title","titleId"];function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function me(e,t){var r=e.title,a=e.titleId,n=be(e,je);return b.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",ref:t,"aria-labelledby":a},n),r?b.createElement("title",{id:a},r):null,$||($=b.createElement("path",{fill:"#ff715b",fillOpacity:1,d:"M0,288L48,272C96,256,192,224,288,197.3C384,171,480,149,576,165.3C672,181,768,235,864,250.7C960,267,1056,245,1152,250.7C1248,256,1344,288,1392,304L1440,320L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})))}var fe=b.forwardRef(me),ye=(r.p,r(25)),Oe=r.n(ye),ge=function(e){var t=e.temperature;return Object(L.jsxs)("div",{className:Oe.a.graphic,children:[Object(L.jsxs)("ul",{className:Oe.a.tempList,children:[Object(L.jsx)("li",{children:"10"}),Object(L.jsx)("li",{children:"13"}),Object(L.jsx)("li",{children:"16"}),Object(L.jsx)("li",{children:"13"}),Object(L.jsx)("li",{children:"10"}),Object(L.jsx)("li",{children:"10"}),Object(L.jsx)("li",{children:"07"})]}),Object(L.jsx)(fe,{className:t>0?Oe.a.redGraphic:Oe.a.blueGraphic}),Object(L.jsxs)("ul",{className:Oe.a.week,children:[Object(L.jsx)("li",{children:"19.04"}),Object(L.jsx)("li",{children:"20.04"}),Object(L.jsx)("li",{children:"21.04"}),Object(L.jsx)("li",{children:"22.04"}),Object(L.jsx)("li",{children:"23.04"}),Object(L.jsx)("li",{children:"24.04"}),Object(L.jsx)("li",{children:"25.04"})]})]})},ve=r(70),xe=r(19),_e=r.n(xe),we=function(e){var t=e.description,r=e.wind,a=e.humidity,n=e.pressure,c=e.temperature;return Object(L.jsxs)("div",{className:_e.a.weatherInfo,children:[Object(L.jsx)("p",{children:t}),Object(L.jsx)("p",{children:Object(L.jsxs)(ve.a,{i18nKey:"weather.wind",values:{value:r},children:["Wind ",Object(L.jsx)("span",{className:c>=0?_e.a.orangeText:_e.a.blueText,children:"m/s"})]})}),Object(L.jsx)("p",{children:Object(L.jsxs)(ve.a,{i18nKey:"weather.humidity",values:{value:a},children:["Humidity ",Object(L.jsx)("span",{className:c>=0?_e.a.orangeText:_e.a.blueText,children:"%"})]})}),Object(L.jsx)("p",{children:Object(L.jsxs)(ve.a,{i18nKey:"weather.pressure",values:{value:n},children:["Pressure ",Object(L.jsx)("span",{className:c>=0?_e.a.orangeText:_e.a.blueText,children:"Pa"})]})})]})},Ce=r(31),Ne=r.n(Ce),Ie=function(e){var t=e.icon,r=e.text,a=Object(g.a)().t;return Object(L.jsxs)("div",{className:Ne.a.weatherIcon,children:[Object(L.jsx)("img",{className:Ne.a.icon,src:"".concat("https://openweathermap.org/img/wn/").concat(t,"@2x.png"),alt:"Icon"}),Object(L.jsx)("p",{className:Ne.a.textIcon,children:a("weather.descriptions.description_".concat(r))})]})},Se=function(e){var t=new Date;return new Intl.DateTimeFormat(e,{hour:"numeric",minute:"numeric"}).format(t)},Le=function(e){var t=new Date;return new Intl.DateTimeFormat(e,{weekday:"long",year:"numeric",month:"short",day:"numeric"}).format(t)},ke=function(e,t){var r=Math.ceil(e);return 0===r?"0":"he"===t?r>0?"".concat(r,"+"):"".concat(Math.abs(r),"-"):r>0?"+".concat(r):"-".concat(r)},Te=r(32),Be=r.n(Te),Pe=function(e){var t=e.city,r=e.country,a=Object(g.a)().i18n;return Object(L.jsxs)("div",{className:Be.a.countryInfo,children:[Object(L.jsxs)("div",{className:Be.a.country,children:[t,", ",r]}),Object(L.jsxs)("div",{className:Be.a.date,children:[Le(a.language)," ",Se(a.language)]})]})},Fe=r(9),Ae=r(37),De=r.n(Ae),Ee=r(14),ze=r.n(Ee),Re=function(e){var t=e.temperature,r=e.id,a=e.onChangeInCelsius,n=e.onChangeInFahrenheit,c=e.feels,i=e.isCelsius,s=Object(g.a)(),o=s.t,l=s.i18n;return Object(L.jsxs)("div",{className:ze.a.temperatureWrapper,children:[Object(L.jsxs)("div",{className:ze.a.mainTemperature,children:[Object(L.jsx)("span",{className:ze.a.temperature,children:ke(t,l.language)}),Object(L.jsxs)("span",{className:ze.a.metric,children:[Object(L.jsx)("span",{"data-id":r,onClick:a,className:De()(ze.a.celsius,Object(Fe.a)({},ze.a.active,i)),children:"\xb0C"})," ","|"," ",Object(L.jsx)("span",{"data-id":r,onClick:n,className:De()(ze.a.fahrenheit,Object(Fe.a)({},ze.a.active,!i)),children:"\xb0F"})]})]}),Object(L.jsx)("div",{className:ze.a.feels,children:o("weather.feels",{value:ke(Math.ceil(c),l.language)})})]})},Je=r(27),Me=r.n(Je),Ge=function(e){var t,r=e.onRemoveCard,a=e.cardInfo,n=e.onChangeInCelsius,c=e.onChangeInFahrenheit;return Object(L.jsxs)("div",{className:Me.a.card,id:String(a.id),style:{backgroundColor:a.temperature<0?"#F1F2FF":"#fff1fe"},children:[Object(L.jsx)(k,{classBtn:Me.a.removeCard,handler:r,children:"X"}),Object(L.jsxs)("div",{className:Me.a.cardTop,children:[Object(L.jsx)(Pe,{city:a.city,country:a.country}),Object(L.jsx)(Ie,{icon:a.icon,text:null===(t=a.text_icon)||void 0===t?void 0:t.toLocaleLowerCase()})]}),Object(L.jsx)(ge,{temperature:a.temperature}),Object(L.jsxs)("div",{className:Me.a.cardBottom,children:[Object(L.jsx)(Re,{temperature:a.temperature,onChangeInCelsius:n,onChangeInFahrenheit:c,isCelsius:a.isCelsius,feels:a.feels,id:a.id}),Object(L.jsx)(we,{temperature:Math.ceil(a.temperature),description:a.description,wind:a.wind_speed,humidity:a.humidity,pressure:a.pressure})]})]})},We=r(48),Ze=r.n(We),Ue=Object(O.a)((function(){var e=W(),t=e.loaderStore,r=e.cardsStore,a=function(e){var t,a=e.currentTarget.dataset.id;if(a){var n=r.getCardById(a);n&&!n.isCelsius&&(n.isCelsius=!0,n.temperature=(t=n.temperature,Math.ceil(5/9*(t-32))),r.updateCardTemperature(n.temperature,a),X(n,a))}},n=function(e){var t,a=e.currentTarget.dataset.id;if(a){var n=r.getCardById(a);n&&n.isCelsius&&(n.isCelsius=!1,n.temperature=(t=n.temperature,Math.floor(1.8*t+32)),r.updateCardTemperature(n.temperature,a),X(n,a))}},c=function(e){var t,a=null===(t=e.target.parentElement)||void 0===t?void 0:t.id;a&&(r.removeCardById(a),Q(a))};return Object(L.jsx)("main",{className:Ze.a.main,children:t.isLoading?Object(L.jsx)(pe,{}):r.cards.map((function(e){return Object(L.jsx)(Ge,{onChangeInCelsius:a,onChangeInFahrenheit:n,onRemoveCard:c,cardInfo:e},e.id)}))})})),Ke=r(38),Ve=r.n(Ke),He=Object(O.a)((function(){var e=W(),t=e.cardsStore,r=e.languageStore,a=Object(g.a)().t;return Object(b.useEffect)((function(){var e=Y();V().length&&t.updateCards(V()),""!==e?r.changeLang(e):q(r.lang)}),[]),Object(L.jsxs)("div",{className:Ve.a.container,children:[Object(L.jsx)(le,{}),0===t.cards.length?Object(L.jsx)("h2",{className:Ve.a.text,children:a("empty")}):Object(L.jsx)(Ue,{})]})})),Qe=r(39),Xe=r(16),Ye=r(49),qe=r(50);Qe.a.use(qe.a).use(Ye.a).use(Xe.e).init({backend:{loadPath:"".concat(window.origin).concat("/weather/locales/{{lng}}/{{ns}}.json")},react:{useSuspense:!1},debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1}});Qe.a,r(66),r(67);y.a.render(Object(L.jsx)(m.a.StrictMode,{children:Object(L.jsx)(He,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.a1a192fd.chunk.js.map