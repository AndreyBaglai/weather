(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{18:function(e,t,r){e.exports={weatherInfo:"styles_weatherInfo__Fxs3u",blueText:"styles_blueText__2SkLs",orangeText:"styles_orangeText__3yYNI"}},20:function(e,t,r){e.exports={form:"styles_form__3EBa3",cityField:"styles_cityField__X_G8w",error:"styles_error__226dO",addBtn:"styles_addBtn__2cTns"}},25:function(e,t,r){e.exports={graphic:"styles_graphic__fDmFu",tempList:"styles_tempList__1bNkv",week:"styles_week__pPTkJ",redGraphic:"styles_redGraphic__2QBsi",blueGraphic:"styles_blueGraphic__DeTgc"}},32:function(e,t,r){e.exports={header:"styles_header__bFteW",removeAll:"styles_removeAll__7zdrw"}},35:function(e,t,r){e.exports={container:"styles_container__1moU1",text:"styles_text__2aAIj"}},42:function(e,t,r){e.exports={selectLang:"styles_selectLang__ZQ06w"}},43:function(e,t,r){e.exports={loader:"styles_loader__KW6Vc"}},45:function(e,t,r){e.exports={main:"styles_main__xrIMk"}},5:function(e,t,r){e.exports={card:"styles_card__etA8J",removeCard:"styles_removeCard__3LVBh",countryInfo:"styles_countryInfo__1B1uy",country:"styles_country__2X5-F",date:"styles_date__aDN0P",cardTop:"styles_cardTop__PZ0Pr",cardBottom:"styles_cardBottom__3gCQ-",weatherIcon:"styles_weatherIcon__3o0uX",icon:"styles_icon__3t6wJ",temperatureWrapper:"styles_temperatureWrapper__PepwB",feels:"styles_feels__1BbQ3",temperature:"styles_temperature__v10fN",metric:"styles_metric__2gzdV",celsius:"styles_celsius__3uEzB",fahrenheit:"styles_fahrenheit__3gzdm",active:"styles_active__ywbG_"}},64:function(e,t,r){},65:function(e,t,r){"use strict";r.r(t);var a,n,c,i,s,o,l,u,d,p,j,b,h=r(0),m=r.n(h),f=r(28),y=r.n(f),O=r(23),g=r(66),v=r(38),_=r(3),x=r.n(_),w=r(7),C=r(14),N=r(29),I=r.n(N),S=r(49),L=r(1),k=function(e){var t=e.handler,r=e.classBtn,a=e.children;return Object(L.jsx)("button",{className:r,onClick:t,children:a})},B=r(9),T=r(8),P=r(4),F=(r(27),r(2)),A=new(a=function e(){Object(T.a)(this,e),Object(B.a)(this,"lang",n,this),Object(B.a)(this,"changeLang",c,this),Object(F.e)(this)},n=Object(P.a)(a.prototype,"lang",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en"}}),c=Object(P.a)(a.prototype,"changeLang",[F.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.lang=t}}}),a),D=r(6),z=r(24),M=new(i=function(){function e(){Object(T.a)(this,e),Object(B.a)(this,"cards",s,this),Object(F.e)(this)}return Object(z.a)(e,[{key:"addCard",value:function(e){this.isRepeatCard(e)||this.cards.unshift(e)}},{key:"isRepeatCard",value:function(e){return this.cards.some((function(t){var r,a;return t.city.toLowerCase()===e.city.toLowerCase()&&(null===(r=t.description)||void 0===r?void 0:r.toLowerCase())===(null===(a=e.description)||void 0===a?void 0:a.toLowerCase())}))}},{key:"getCardById",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"removeCardById",value:function(e){this.cards=this.cards.filter((function(t){return t.id!==e}))}},{key:"updateCardTemperature",value:function(e,t){this.cards=this.cards.map((function(r){return r.id===t&&(r.temperature=e),r}))}},{key:"getAllNamesCity",value:function(){return this.cards.map((function(e){return e.city}))}},{key:"updateCards",value:function(e){this.cards=Object(D.a)(e)}},{key:"removeAllCards",value:function(){this.cards=[]}}]),e}(),s=Object(P.a)(i.prototype,"cards",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(P.a)(i.prototype,"addCard",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"addCard"),i.prototype),Object(P.a)(i.prototype,"isRepeatCard",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"isRepeatCard"),i.prototype),Object(P.a)(i.prototype,"getCardById",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"getCardById"),i.prototype),Object(P.a)(i.prototype,"removeCardById",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"removeCardById"),i.prototype),Object(P.a)(i.prototype,"updateCardTemperature",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"updateCardTemperature"),i.prototype),Object(P.a)(i.prototype,"getAllNamesCity",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"getAllNamesCity"),i.prototype),Object(P.a)(i.prototype,"updateCards",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"updateCards"),i.prototype),Object(P.a)(i.prototype,"removeAllCards",[F.b],Object.getOwnPropertyDescriptor(i.prototype,"removeAllCards"),i.prototype),i),E=new(o=function e(){Object(T.a)(this,e),Object(B.a)(this,"isLoading",l,this),Object(B.a)(this,"toggleLoader",u,this),Object(F.e)(this)},l=Object(P.a)(o.prototype,"isLoading",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(P.a)(o.prototype,"toggleLoader",[F.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.isLoading=!e.isLoading}}}),o),J=(d=function e(){Object(T.a)(this,e),Object(B.a)(this,"languageStore",p,this),Object(B.a)(this,"cardsStore",j,this),Object(B.a)(this,"loaderStore",b,this)},p=Object(P.a)(d.prototype,"languageStore",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A}}),j=Object(P.a)(d.prototype,"cardsStore",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M}}),b=Object(P.a)(d.prototype,"loaderStore",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E}}),d),R=new J,G=Object(h.createContext)(R),W=function(){var e=Object(h.useContext)(G);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},H=(new J,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return fetch("".concat("https://api.openweathermap.org/data/2.5/weather","?q=").concat(e,"&units=metric&lang=").concat(t,"&appid=").concat("2904218e66790986ea8f1701ca13b7b5")).then((function(e){if(404!==e.status)return e.json()})).then((function(e){return e}))}),V="cards",Z="lang";function K(){var e=localStorage.getItem(V);return e?JSON.parse(e):[]}function Q(e){localStorage.setItem(V,JSON.stringify(e))}function X(e){var t=K();t.length&&Q(t.filter((function(t){return t.id!==e})))}function U(e,t){X(t);var r=K();Q([e].concat(Object(D.a)(r)))}function Y(){var e=localStorage.getItem(Z);return e?JSON.parse(e):""}function q(e){localStorage.setItem(Z,JSON.stringify(e))}var $,ee=r(20),te=r.n(ee),re=function(){var e=Object(h.useState)(!1),t=Object(C.a)(e,2),r=t[0],a=t[1],n=Object(h.useState)(!1),c=Object(C.a)(n,2),i=c[0],s=c[1],o=Object(g.a)(),l=o.t,u=o.i18n,d=Object(S.a)(),p=d.register,j=d.handleSubmit,b=d.reset,m=d.formState,f=m.errors,y=m.isSubmitSuccessful,O=W(),_=O.cardsStore,N=O.languageStore;Object(h.useEffect)((function(){y&&b({city:""})}),[y,b]);var B=function(){var e=Object(w.a)(x.a.mark((function e(t){var r,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.city,e.prev=1,""!==r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,H(r,N.lang);case 6:(n=e.sent)||(a(!0),setTimeout((function(){return a(!1)}),2e3)),c={id:I()(),city:n.name,time:n.dt,country:n.sys.country,temperature:n.main.temp,humidity:n.main.humidity,pressure:n.main.pressure,feels:n.main.feels_like,icon:n.weather[0].icon,text_icon:n.weather[0].main,description:n.weather[0].description,wind_speed:n.wind.speed,isCelsius:!0},_.isRepeatCard(c)&&(setTimeout((function(){return s(!1)}),2e3),s(!0)),_.addCard(c),Q(_.cards),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("Invalid city name ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsxs)("form",{className:te.a.form,onSubmit:j(B),children:[Object(L.jsx)("input",Object(v.a)({type:"text",className:te.a.cityField,id:"city",lang:u.language,placeholder:l("placeholder")},p("city",{pattern:{value:/^([a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0430-\u044f\u0410-\u042f\u0080-\u024F]*$/,message:l("tooltips.validate")}}))),f.city&&Object(L.jsx)("p",{className:te.a.error,children:f.city.message}),r&&Object(L.jsx)("p",{className:te.a.error,children:l("tooltips.not_found")}),i&&Object(L.jsx)("p",{className:te.a.error,children:l("tooltips.city_repeat")}),Object(L.jsx)(k,{classBtn:te.a.addBtn,id:"addBtn",children:l("buttons.add")})]})},ae=r(42),ne=r.n(ae),ce={en:{nativeName:"English"},ru:{nativeName:"Russian"},uk:{nativeName:"Ukraine"},he:{nativeName:"Hebrew"}},ie=Object(O.a)((function(){var e=W(),t=e.cardsStore,r=e.languageStore,a=e.loaderStore,n=Object(g.a)().i18n,c=function(){var e=Object(w.a)(x.a.mark((function e(c){var i,s,o,l,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.toggleLoader(),i=c.target,s=i.value,n.changeLanguage(s),o=t.getAllNamesCity(),l=o.map((function(e){return new Promise((function(t,r){t(H(e,s))}))})),e.next=8,Promise.all(l).then((function(e){return e.map((function(e){var t=e.weather&&e.weather[0];return{id:I()(),city:e.name,time:e.dt,country:e.sys.country,temperature:e.main.temp,humidity:e.main.humidity,pressure:e.main.pressure,feels:e.main.feels_like,icon:t&&t.icon,text_icon:t&&t.main,description:t&&t.description,wind_speed:e.wind.speed,isCelsius:!0}}))}));case 8:u=e.sent,t.updateCards(u),r.changeLang(s),Q(u),q(s),setTimeout((function(){a.toggleLoader()}),1e3);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L.jsx)("select",{name:"language",id:"lang",className:ne.a.selectLang,onChange:c,defaultValue:Y(),children:Object.keys(ce).map((function(e){return Object(L.jsx)("option",{value:e,children:e.toUpperCase()},e)}))})})),se=r(32),oe=r.n(se),le=function(){var e=W().cardsStore,t=Object(g.a)().t;return Object(L.jsxs)("header",{className:oe.a.header,children:[Object(L.jsx)(re,{}),Object(L.jsx)(k,{classBtn:oe.a.removeAll,handler:function(){e.removeAllCards(),localStorage.removeItem(V)},children:t("buttons.remove")}),Object(L.jsx)(ie,{})]})},ue=r(43),de=r.n(ue),pe=function(){var e=Object(g.a)().t;return Object(L.jsx)("h2",{className:de.a.loader,children:e("loader")})},je=r(10),be=r(33),he=r.n(be),me=["title","titleId"];function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function ye(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Oe(e,t){var r=e.title,a=e.titleId,n=ye(e,me);return h.createElement("svg",fe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",ref:t,"aria-labelledby":a},n),r?h.createElement("title",{id:a},r):null,$||($=h.createElement("path",{fill:"#ff715b",fillOpacity:1,d:"M0,288L48,272C96,256,192,224,288,197.3C384,171,480,149,576,165.3C672,181,768,235,864,250.7C960,267,1056,245,1152,250.7C1248,256,1344,288,1392,304L1440,320L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})))}var ge=h.forwardRef(Oe),ve=(r.p,r(25)),_e=r.n(ve),xe=function(e){var t=e.temperature;return Object(L.jsxs)("div",{className:_e.a.graphic,children:[Object(L.jsxs)("ul",{className:_e.a.tempList,children:[Object(L.jsx)("li",{children:"10"}),Object(L.jsx)("li",{children:"13"}),Object(L.jsx)("li",{children:"16"}),Object(L.jsx)("li",{children:"13"}),Object(L.jsx)("li",{children:"10"}),Object(L.jsx)("li",{children:"10"}),Object(L.jsx)("li",{children:"07"})]}),Object(L.jsx)(ge,{className:t>0?_e.a.redGraphic:_e.a.blueGraphic}),Object(L.jsxs)("ul",{className:_e.a.week,children:[Object(L.jsx)("li",{children:"19.04"}),Object(L.jsx)("li",{children:"20.04"}),Object(L.jsx)("li",{children:"21.04"}),Object(L.jsx)("li",{children:"22.04"}),Object(L.jsx)("li",{children:"23.04"}),Object(L.jsx)("li",{children:"24.04"}),Object(L.jsx)("li",{children:"25.04"})]})]})},we=function(){var e=new Date,t=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),r=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(t,":").concat(r)},Ce=function(e,t){var r=new Date,a=r.getMonth(),n=r.getDay(),c=r.getDate(),i=e("months.month_".concat(a)),s=e("days.day_".concat(n));return"he"===t?"".concat(s," ").concat(i," ").concat(c,","):"".concat(s,", ").concat(c," ").concat(i,",")},Ne=function(e,t){var r=Math.ceil(e);return 0===r?"0":"he"===t?r>0?"".concat(r,"+"):"".concat(Math.abs(r),"-"):r>0?"+".concat(r):"-".concat(r)},Ie=r(5),Se=r.n(Ie),Le=r(67),ke=r(18),Be=r.n(ke),Te=function(e){var t=e.description,r=e.wind,a=e.humidity,n=e.pressure,c=e.temperature;return Object(L.jsxs)("div",{className:Be.a.weatherInfo,children:[Object(L.jsx)("p",{children:t}),Object(L.jsx)("p",{children:Object(L.jsxs)(Le.a,{i18nKey:"weather.wind",values:{value:r},children:["Wind ",Object(L.jsx)("span",{className:c>=0?Be.a.orangeText:Be.a.blueText,children:"m/s"})]})}),Object(L.jsx)("p",{children:Object(L.jsxs)(Le.a,{i18nKey:"weather.humidity",values:{value:a},children:["Humidity ",Object(L.jsx)("span",{className:c>=0?Be.a.orangeText:Be.a.blueText,children:"%"})]})}),Object(L.jsx)("p",{children:Object(L.jsxs)(Le.a,{i18nKey:"weather.pressure",values:{value:n},children:["Pressure ",Object(L.jsx)("span",{className:c>=0?Be.a.orangeText:Be.a.blueText,children:"Pa"})]})})]})},Pe=function(e){var t,r=e.onRemoveCard,a=e.cardInfo,n=e.onChangeInCelsius,c=e.onChangeInFahrenheit,i=Object(g.a)(),s=i.t,o=i.i18n;return Object(L.jsxs)("div",{className:Se.a.card,id:String(a.id),style:{backgroundColor:a.temperature<0?"#F1F2FF":"#fff1fe"},children:[Object(L.jsx)(k,{classBtn:Se.a.removeCard,handler:r,children:"X"}),Object(L.jsxs)("div",{className:Se.a.cardTop,children:[Object(L.jsxs)("div",{className:Se.a.countryInfo,children:[Object(L.jsxs)("div",{className:Se.a.country,children:[a.city,", ",a.country]}),Object(L.jsxs)("div",{className:Se.a.date,children:[Ce(s,o.language)," ",we()]})]}),Object(L.jsxs)("div",{className:Se.a.weatherIcon,children:[Object(L.jsx)("img",{className:Se.a.icon,src:"".concat("https://openweathermap.org/img/wn/").concat(a.icon,"@2x.png"),alt:"Icon"}),Object(L.jsx)("p",{className:Se.a.textIcon,children:s("weather.descriptions.description_".concat(null===(t=a.text_icon)||void 0===t?void 0:t.toLocaleLowerCase()))})]})]}),Object(L.jsx)(xe,{temperature:a.temperature}),Object(L.jsxs)("div",{className:Se.a.cardBottom,children:[Object(L.jsxs)("div",{className:Se.a.temperatureWrapper,children:[Object(L.jsxs)("div",{className:Se.a.mainTemperature,children:[Object(L.jsx)("span",{className:Se.a.temperature,children:Ne(a.temperature,o.language)}),Object(L.jsxs)("span",{className:Se.a.metric,children:[Object(L.jsx)("span",{"data-id":a.id,onClick:n,className:he()(Se.a.celsius,Object(je.a)({},Se.a.active,a.isCelsius)),children:"\xb0C"})," ","|"," ",Object(L.jsx)("span",{"data-id":a.id,onClick:c,className:he()(Se.a.fahrenheit,Object(je.a)({},Se.a.active,!a.isCelsius)),children:"\xb0F"})]})]}),Object(L.jsx)("div",{className:Se.a.feels,children:s("weather.feels",{value:Ne(Math.ceil(a.feels),o.language)})})]}),Object(L.jsx)(Te,{temperature:Math.ceil(a.temperature),description:a.description,wind:a.wind_speed,humidity:a.humidity,pressure:a.pressure})]})]})},Fe=r(45),Ae=r.n(Fe),De=Object(O.a)((function(){var e=W(),t=e.loaderStore,r=e.cardsStore,a=function(e){var t,a=e.currentTarget.dataset.id;if(a){var n=r.getCardById(a);n&&!n.isCelsius&&(n.isCelsius=!0,n.temperature=(t=n.temperature,Math.ceil(5/9*(t-32))),r.updateCardTemperature(n.temperature,a),U(n,a))}},n=function(e){var t,a=e.currentTarget.dataset.id;if(a){var n=r.getCardById(a);n&&n.isCelsius&&(n.isCelsius=!1,n.temperature=(t=n.temperature,Math.floor(1.8*t+32)),r.updateCardTemperature(n.temperature,a),U(n,a))}},c=function(e){var t,a=null===(t=e.target.parentElement)||void 0===t?void 0:t.id;a&&(r.removeCardById(a),X(a))};return Object(L.jsx)("main",{className:Ae.a.main,children:t.isLoading?Object(L.jsx)(pe,{}):r.cards.map((function(e){return Object(L.jsx)(Pe,{onChangeInCelsius:a,onChangeInFahrenheit:n,onRemoveCard:c,cardInfo:e},e.id)}))})})),ze=r(35),Me=r.n(ze),Ee=Object(O.a)((function(){var e=W(),t=e.cardsStore,r=e.languageStore,a=Object(g.a)().t;return Object(h.useEffect)((function(){var e=Y();K().length&&t.updateCards(K()),""!==e?r.changeLang(e):q(r.lang)}),[]),Object(L.jsxs)("div",{className:Me.a.container,children:[Object(L.jsx)(le,{}),0===t.cards.length?Object(L.jsx)("h2",{className:Me.a.text,children:a("empty")}):Object(L.jsx)(De,{})]})})),Je=r(36),Re=r(15),Ge=r(46),We=r(47);Je.a.use(We.a).use(Ge.a).use(Re.e).init({backend:{loadPath:"".concat(window.origin).concat("/weather/locales/{{lng}}/{{ns}}.json")},react:{useSuspense:!1},debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1}});Je.a,r(63),r(64);y.a.render(Object(L.jsx)(m.a.StrictMode,{children:Object(L.jsx)(Ee,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.ae7aa6d7.chunk.js.map