(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(12),s=n.n(r),i=n(10),o=n(15),u=n(2),l=n.n(u),d=n(5),h=n(13),m=n.n(h),j=n(16),f=["Jun","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b="https://api.openweathermap.org/data/2.5/",g="2904218e66790986ea8f1701ca13b7b5";function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return fetch("".concat(b,"weather?q=").concat(e,"&units=metric&lang=").concat(t,"&appid=").concat(g)).then((function(e){if(404!==e.status)return e.json()})).then((function(e){return e}))}var O=n(6),x=n(3),y=new function e(){var t=this;Object(O.a)(this,e),this.lang="en",this.changeLang=function(e){t.lang=e},Object(x.d)(this)},C=n(4),w=n(8),N=new(function(){function e(){Object(O.a)(this,e),this.cards=[],Object(x.d)(this)}return Object(w.a)(e,[{key:"totalCards",get:function(){return this.cards}},{key:"addCard",value:function(e){this.isRepeatCard(e)||this.cards.unshift(e)}},{key:"isRepeatCard",value:function(e){return this.cards.some((function(t){return t.city.toLowerCase()===e.city.toLowerCase()&&t.description.toLowerCase()===e.description.toLowerCase()}))}},{key:"getCardById",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"removeCardById",value:function(e){this.cards=this.cards.filter((function(t){return t.id!==e}))}},{key:"updateCardTemperature",value:function(e,t){this.cards=this.cards.map((function(n){return n.id===t&&(n.temperature=e),n}))}},{key:"getAllNamesCity",value:function(){return this.cards.map((function(e){return e.city}))}},{key:"updateCards",value:function(e){this.cards=Object(C.a)(e)}},{key:"removeAllCards",value:function(){this.cards=[]}}]),e}()),L="cards",k="lang";function S(){var e=localStorage.getItem(L);return e?JSON.parse(e):[]}function M(e){localStorage.setItem(L,JSON.stringify(e))}function I(e){var t=S();t.length&&M(t.filter((function(t){return t.id!==e})))}function A(){var e=localStorage.getItem(k);return e?JSON.parse(e):""}function J(e){localStorage.setItem(k,JSON.stringify(e))}n(24);var B=n(0),T=function(){var e=Object(j.a)(),t=e.register,n=e.handleSubmit,c=e.reset,r=e.formState,s=r.errors,i=r.isSubmitSuccessful;Object(a.useEffect)((function(){i&&c({city:""})}),[i,c]);var u=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.city,e.prev=1,""!==n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,v(n,y.lang);case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return");case 9:c={id:m()(),city:a.name,time:a.dt,country:a.sys.country,temperature:a.main.temp,humidity:a.main.humidity,pressure:a.main.pressure,feels:a.main.feels_like,icon:a.weather[0].icon,text_icon:a.weather[0].main,description:a.weather[0].description,wind_speed:a.wind.speed,isCelsius:!0},N.addCard(c),M(N.totalCards),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("Invalid city name ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)("form",{className:"form",onSubmit:n(u),children:[Object(B.jsx)("input",Object(o.a)({type:"text",className:"city-field",id:"city",placeholder:"City name..."},t("city",{pattern:{value:/^([a-zA-Z\u0080-\u024F]+(?:. |-| |'))*[a-zA-Z\u0430-\u044f\u0410-\u042f\u0080-\u024F]*$/,message:"Must be only letters"}}))),s.city&&Object(B.jsx)("p",{className:"error",children:s.city.message}),Object(B.jsx)("button",{id:"addBtn",children:"Add"})]})},_=new(function(){function e(){var t=this;Object(O.a)(this,e),this.isLoading=!1,this.toggleLoader=function(){return t.isLoading=!t.isLoading},Object(x.d)(this)}return Object(w.a)(e,[{key:"getStatus",get:function(){return this.isLoading}}]),e}()),F=(n(26),Object(i.a)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.toggleLoader(),n=t.target,a=n.value,c=N.getAllNamesCity(),r=c.map((function(e){return new Promise((function(t,n){t(v(e,a))}))})),e.next=7,Promise.all(r).then((function(e){return e.map((function(e){return{id:m()(),city:e.name,time:e.dt,country:e.sys.country,temperature:e.main.temp,humidity:e.main.humidity,pressure:e.main.pressure,feels:e.main.feels_like,icon:e.weather[0].icon,text_icon:e.weather[0].main,description:e.weather[0].description,wind_speed:e.wind.speed,isCelsius:!0}}))}));case 7:s=e.sent,N.updateCards(s),y.changeLang(a),M(s),J(a),setTimeout((function(){_.toggleLoader()}),1e3);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)("select",{name:"language",id:"lang",className:"select-lang",onChange:e,defaultValue:A(),children:[Object(B.jsx)("option",{value:"en",children:"EN"}),Object(B.jsx)("option",{value:"ru",children:"RU"}),Object(B.jsx)("option",{value:"uk",children:"UA"})]})})));n(27);function R(){return Object(B.jsxs)("header",{className:"header",children:[Object(B.jsx)(T,{}),Object(B.jsx)("button",{className:"remove-all",onClick:function(){N.removeAllCards(),localStorage.removeItem(L)},children:"Remove all"}),Object(B.jsx)(F,{})]})}n(28);function D(){return Object(B.jsx)("h2",{className:"loader",children:"Loading..."})}n(29);function P(e){var t=e.onChangeTemperature,n=e.onRemoveCard,a=e.info;return Object(B.jsxs)("div",{className:"card",id:String(a.id),children:[Object(B.jsx)("button",{className:"remove-card",onClick:n,children:"X"}),Object(B.jsxs)("div",{className:"card-top",children:[Object(B.jsxs)("div",{className:"country-info",children:[Object(B.jsxs)("div",{className:"country",children:[a.city,", ",a.country]}),Object(B.jsxs)("div",{className:"date",children:[function(){var e=new Date,t=e.getMonth(),n=e.getDay(),a=e.getDate();return"".concat(p[n],", ").concat(a," ").concat(f[t],",")}()," ",function(){var e=new Date,t=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),n=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(t,":").concat(n)}()]})]}),Object(B.jsxs)("div",{className:"weather-icon",children:[Object(B.jsx)("img",{className:"icon",src:"https://openweathermap.org/img/wn/".concat(a.icon,"@2x.png"),alt:"Icon"}),Object(B.jsx)("p",{className:"text-icon",children:a.text_icon})]})]}),Object(B.jsx)("div",{className:"graphic",children:a.temperature>0?Object(B.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:Object(B.jsx)("path",{fill:"#ff715b",fillOpacity:"1",d:"M0,288L48,272C96,256,192,224,288,197.3C384,171,480,149,576,165.3C672,181,768,235,864,250.7C960,267,1056,245,1152,250.7C1248,256,1344,288,1392,304L1440,320L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})}):Object(B.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:Object(B.jsx)("path",{fill:"#5ba8ff",fillOpacity:"1",d:"M0,288L48,272C96,256,192,224,288,197.3C384,171,480,149,576,165.3C672,181,768,235,864,250.7C960,267,1056,245,1152,250.7C1248,256,1344,288,1392,304L1440,320L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})})}),Object(B.jsxs)("div",{className:"card-bottom",children:[Object(B.jsxs)("div",{className:"temperature-wrapper",onClick:t,children:[Object(B.jsxs)("div",{className:"main-temperature",children:[Object(B.jsx)("span",{className:"temperature",children:function(e){var t=Math.ceil(e);return 0===t?"0":t>0?"+".concat(t):"-".concat(t)}(a.temperature)}),Object(B.jsxs)("span",{className:"metric",children:[Object(B.jsx)("span",{className:"celsius ".concat(a.isCelsius?"active":""),children:"\xb0C"})," |"," ",Object(B.jsx)("span",{className:"fahrenheit ".concat(a.isCelsius?"":"active"),children:"\xb0F"})]})]}),Object(B.jsxs)("div",{className:"feels",children:["Feels like:"," ",Math.ceil(a.feels)>0?"+".concat(Math.ceil(a.feels)):"-".concat(Math.ceil(a.feels))]})]}),Object(B.jsxs)("div",{className:"weather-info",children:[Object(B.jsx)("p",{children:a.description}),Object(B.jsxs)("p",{children:["Wind: ",Object(B.jsxs)("span",{className:"value",children:[a.wind_speed,"m/s"]})]}),Object(B.jsxs)("p",{children:["Humidity: ",Object(B.jsxs)("span",{className:"value",children:[a.humidity,"%"]})]}),Object(B.jsxs)("p",{children:["Pressure: ",Object(B.jsxs)("span",{className:"value",children:[a.pressure,"Pa"]})]})]})]})]})}n(30);var E=Object(i.a)((function(){var e=function(e){var t,n,a=e.currentTarget,c=e.target,r=String(null===(t=a.closest(".card"))||void 0===t?void 0:t.id),s=N.getCardById(r);s&&(s.isCelsius&&c.classList.contains("fahrenheit")&&(s.isCelsius=!1,s.temperature=(n=s.temperature,Math.floor(1.8*n+33))),!s.isCelsius&&c.classList.contains("celsius")&&(s.isCelsius=!0,s.temperature=function(e){return Math.ceil(5/9*(e-32))}(s.temperature)),N.updateCardTemperature(s.temperature,r),function(e,t){I(t);var n=S();M([e].concat(Object(C.a)(n)))}(s,r))},t=function(e){var t,n=null===(t=e.target.closest(".card"))||void 0===t?void 0:t.id;n&&(N.removeCardById(n),I(n))};return Object(B.jsx)("main",{className:"main",children:_.getStatus?Object(B.jsx)(D,{}):N.totalCards.map((function(n){return Object(B.jsx)(P,{onChangeTemperature:e,onRemoveCard:t,info:n},n.id)}))})})),H=(n(31),Object(i.a)((function(){return Object(a.useEffect)((function(){var e=A();S().length&&N.updateCards(S()),""!==e?y.changeLang(e):J(y.lang)}),[]),Object(B.jsxs)("div",{className:"container",children:[Object(B.jsx)(R,{}),0===N.totalCards.length?Object(B.jsx)("p",{children:"Please, input city name"}):Object(B.jsx)(E,{})]})})));n(32);s.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)(H,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.f3b13d82.chunk.js.map